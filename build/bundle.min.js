var App=App||{};!function(){var e=function(e,t){App.academies=t,Util.assignId(App.academies),App.initialize(),Routing.precompileTemplates(),Routing.initializeRoutes()};queue().defer(d3.tsv,"data/academies.tsv").await(e)}();var Routing={};!function(){var e={};Routing.precompileTemplates=function(){$("script[type='text/x-handlebars-template']").each(function(t,i){e[i.id.replace("-template","")]=Handlebars.compile($(i).html())})},Routing.initializeRoutes=function(){crossroads.addRoute("/",function(){i("home"),App.initHome(),window.scrollTo(0,0)}),crossroads.addRoute("/academy/{id}",function(e){i("academy"),App.initAcademy(),window.scrollTo(0,0)}),hasher.prependHash="",hasher.initialized.add(t),hasher.changed.add(t),hasher.init()};var t=function(e){crossroads.parse(e)},i=function(t,i){$("#page-content").html(e[t](i))}}();var Util={};Util.monetize=d3.format("$,f"),Util.assignId=function(e){for(var t=0;t<e.length;t++)e[t].id=t};var App=App||{},App=App||{};!function(){App.spendingCategories=["Cash","Equipment","Scholarship","Stipend","Other","Paid Internships","Emp. Hours","Total"],App.initialize=function(){},App.initHome=function(){var e=d3.select(".academy-table"),t=e.select("thead tr"),i=e.select("tbody");t.selectAll("td").data(["Academy"].concat(App.spendingCategories)).enter().append("td").text(function(e){return e});for(var a=i.selectAll("tr").data(App.academies),n=a.enter().append("tr"),p=0;p<App.spendingCategories.length+1;p++)n.append("td");a.on("click",function(e){hasher.setHash("academy/"+e.id)});for(var p=0;p<App.spendingCategories.length+1;p++){var o=a.select("td:nth-child("+(p+1)+")");0===p?o.text(function(e){return e["Academy Name"]+" ("+e["High School"]+")"}):o.text(function(e){return Util.monetize(e[App.spendingCategories[p-1]])})}a.exit().remove()}}();